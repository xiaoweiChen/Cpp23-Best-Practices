返回原始指针会让阅读者和库使用者对所有权语义产生困惑。应优先考虑使用引用、智能指针、非拥有的指针包装器，或考虑使用可选引用。

\filename{图40. 返回原始指针的函数}

\begin{cpp}
int *get_value();
\end{cpp}

这个返回值的所有权归谁？是我吗？当我使用完毕后，是否需要我去删除它？或者更糟的情况是，如果这块内存是由 malloc 分配的，是否需要用 free 来释放？

它是一个单独的 int 还是一组 int 数组？

这段代码引发了太多疑问，甚至 [[nodiscard]] 也无法解决。

\begin{myTip}{练习：在代码中查找潜在的内存泄漏}
到现，你已经做了足够多的这类与API相关的练习，知道该怎么做。现在就去检查代码吧！看看有没有更好的实现方式！你能否改为返回一个值、引用，或者 std::unique\_ptr？
\end{myTip}





















