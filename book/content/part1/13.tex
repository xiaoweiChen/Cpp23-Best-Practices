\filename{图 5. 对“空”引用的测试会被移除}

\begin{cpp}
int get_value(int &thing) {
  if (&thing == nullptr) {
    // removed by compiler
    return 42;
  } else {
    return thing;
  }
}
\end{cpp}

创建一个空引用(null reference)是未定义行为(UB)，请不要尝试。在设计 API 时，请始终假设一个引用指向的是一个有效的对象，并利用这一事实来简化你的设计。

\begin{myTip}{练习：检查是否有对对象地址的判断}
使用 \verb|&thing ==| 来检查对象的特定内存地址有许多合理的用途，但这种检查也常常会被误用。

请在你的代码中搜索所有检查对象内存地址的语句，理解它们的意图，并分析它们是否正确(或是否有效)。
\end{myTip}

\begin{myWarning}{警告}
除了使用 ==，还有哪些方式可能在检查对象的地址？
\end{myWarning}

这个练习能让你很好地锻炼各种搜索工具(如 grep)和正则表达式(regex)的使用能力。

\mySubsectionNoFile{13.1}{资源}

\begin{itemize}
\item
-Wtautological-undefined-compare\footnote{\url{https://clang.llvm.org/docs/DiagnosticsReference.html\#wtautological-undefined-compare}}
\end{itemize}









